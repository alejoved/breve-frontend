<section #section id="como-funciona" class="w-full px-4 md:px-8 lg:px-[77px] py-8 md:py-16 lg:py-20 relative">
  <div class="w-full max-w-[1366px] mx-auto">
    <h2
      [ngClass]="'font-funnel font-medium text-white text-center tracking-[-1.09px] px-4 transition-all duration-700 ' + (isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10')">
      Cobros Automáticos y Gestión de Suscriptores en solo 3 pasos
    </h2>

    <br><br><br>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-[33px] w-full">
      <div *ngFor="let step of steps; let i = index"
           [style.transition-delay]="isVisible ? getItemDelay(i) : '0ms'"
           [class]="'relative w-full bg-[#ffffff0a] rounded-[30px] border-0 overflow-hidden transition-all duration-700 hover:scale-105 hover:bg-[#ffffff12] ' + (isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10')">
        <div class="flex flex-col p-0">
          <div class="relative w-full px-6 pt-6 pb-6 flex flex-col items-center">
            <div class="w-[52px] h-[52px] rounded-full bg-[linear-gradient(214deg,rgba(255,220,230,1)_0%,rgba(187,173,255,1)_100%)] flex items-center justify-center mb-6">
              <span class="font-degular font-medium text-[#69529d]">
                {{ step.number }}
              </span>
            </div>

            <div class="w-full flex items-center justify-center">
              <img class="w-full h-auto object-contain rounded-[20px]" [alt]="'Step ' + step.number" [src]="step.image">
            </div>
          </div>

          <div class="flex flex-col px-6 pb-8 gap-4">
            <h3 class="font-funnel font-semibold text-white">
              {{ step.title }}
            </h3>

            <p class="font-degular font-normal text-white/90">
              {{ step.description }}
            </p>

            <div class="flex flex-col gap-3 mt-2">
              <div *ngFor="let feature of step.features" class="flex items-center gap-3">
                <img class="w-[48px] h-[48px] flex-shrink-0" alt="Feature icon" [src]="feature.icon">
                <span class="font-degular font-medium text-white">
                  {{ feature.text }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>